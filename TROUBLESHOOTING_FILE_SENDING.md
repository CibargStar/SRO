# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–∞–π–ª–æ–≤ (PDF) –≤ –∫–∞–º–ø–∞–Ω–∏—è—Ö

## –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ PDF —Ñ–∞–π–ª–æ–≤ –∏–∑ –º—É–ª—å—Ç–∏-—à–∞–±–ª–æ–Ω–æ–≤:
```
Message verification failed
File not found: ...
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. ‚ùå –§–∞–π–ª—ã –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –ø—Ä–æ–µ–∫—Ç
–§–∞–π–ª—ã —à–∞–±–ª–æ–Ω–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `backend/uploads/templates/` –∏ **–ù–ï** –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `backend/uploads/templates/` —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä –∫–æ–ª–ª–µ–≥–∏
- –ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –∑–∞–Ω–æ–≤–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–æ–∑–¥–∞–π—Ç–µ —à–∞–±–ª–æ–Ω—ã –∑–∞–Ω–æ–≤–æ)

### 2. ‚ùå –ü—Ä–æ–±–µ–ª—ã –≤ –ø—É—Ç–∏ –∫ –ø—Ä–æ–µ–∫—Ç—É
–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sro test`), –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞, —É–±—Ä–∞–≤ –ø—Ä–æ–±–µ–ª—ã: `sro test` ‚Üí `sro-test` –∏–ª–∏ `SRO`
- –ò–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ –ø–∞–ø–∫—É –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤

### 3. ‚ùå –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã `templates` –∏ `template_items` –Ω–µ —Å–æ–∑–¥–∞–Ω—ã, —Ñ–∞–π–ª—ã –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```powershell
cd backend
npx prisma migrate status
```

**–†–µ—à–µ–Ω–∏–µ:**
```powershell
cd backend
npx prisma migrate deploy
# –∏–ª–∏ –¥–ª—è development:
npx prisma migrate dev
```

### 4. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `process.cwd()`
–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–µ –∏–∑ –ø–∞–ø–∫–∏ `backend`, –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –±—É–¥—É—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ `npm run dev` –∏–∑ –ø–∞–ø–∫–∏ `backend/`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - —Ç–∞–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `processCwd` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—É—Ç–µ–º

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:**
```powershell
cd C:\Users\Magomed\Desktop\sro test\SRO\backend
npm run dev
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–∞–π–ª–∞ –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
Starting file send { attachmentPath: "...", processCwd: "..." }
Resolved file path { originalPath: "...", resolvedPath: "..." }
File exists { filePath: "..." }
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `File not found` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏
2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É–∫–∞–∑–∞–Ω `processCwd`

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
```powershell
# –î–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –ø–∞–ø–∫–∞:
backend\uploads\templates\

# –í–Ω—É—Ç—Ä–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–∞–ø–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
backend\uploads\templates\{userId}\{templateId}\{filename}.pdf
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î
```powershell
cd backend
npx prisma studio
```

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `template_items` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ï—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏ —Å `type = FILE`
- –ó–∞–ø–æ–ª–Ω–µ–Ω–æ –ª–∏ –ø–æ–ª–µ `filePath` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä: `userId/templateId/filename.pdf`)

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã:**
   ```powershell
   # –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å—é –ø–∞–ø–∫—É backend\uploads\templates\
   # –ù–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä –∫–æ–ª–ª–µ–≥–∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ —Ç–æ –∂–µ –º–µ—Å—Ç–æ
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```powershell
   cd backend
   npx prisma migrate deploy
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```powershell
   # –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∏–∑ –ø–∞–ø–∫–∏ backend/
   npm run dev
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:**
   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –æ –ø—É—Ç—è—Ö –∫ —Ñ–∞–π–ª–∞–º
   - –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –≤—Ä—É—á–Ω—É—é

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–§–∞–π–ª—ã –Ω–µ –≤ Git** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏** - –≤ –ë–î —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `userId/templateId/file.pdf`)
3. **–ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Ö –≤ `{process.cwd()}/uploads/templates/{relativePath}`
4. **–ü—Ä–æ–±–µ–ª—ã –≤ –ø—É—Ç—è—Ö** - –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –ª—É—á—à–µ –∏–∑–±–µ–≥–∞—Ç—å

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—É—Ç—è—Ö
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ –¥–∏—Å–∫–µ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –∑–∞–Ω–æ–≤–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å


