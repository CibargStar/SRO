# –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Chrome –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

–ú–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º Chrome –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ Puppeteer.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
chrome-process/
‚îú‚îÄ‚îÄ chrome-process.manager.ts  # –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
‚îú‚îÄ‚îÄ chrome-process.service.ts  # –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ index.ts                   # –ü—É–±–ª–∏—á–Ω—ã–π API
‚îî‚îÄ‚îÄ README.md                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ú–æ–¥—É–ª—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

1. **–ó–∞–ø—É—Å–∫ Chrome** - –∑–∞–ø—É—Å–∫ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö Chrome –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
2. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ Chrome** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
4. **–ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** - –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ñ–∏–ª—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
5. **Graceful shutdown** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–µ—Ä–≤–µ—Ä–∞

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { ChromeProcessService } from './chrome-process';
import { IsolationService } from '../isolation';

const isolationService = new IsolationService('./profiles');
const chromeService = new ChromeProcessService(isolationService);

// –ó–∞–ø—É—Å–∫ Chrome –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è
const processInfo = await chromeService.startProfile(userId, profileId, {
  headless: true, // –ó–∞–ø—É—Å–∫ –±–µ–∑ UI
});

// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Chrome
await chromeService.stopProfile(userId, profileId, false);
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ProfilesService

`ChromeProcessService` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `ProfilesService`:

```typescript
// –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ñ–∏–ª—è
const result = await profilesService.startProfile(profileId, userId);

// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
await profilesService.stopProfile(profileId, userId, false);
```

## üì° API

### ChromeProcessService

#### `startProfile(userId, profileId, options?)`
–ó–∞–ø—É—Å–∫–∞–µ—Ç Chrome –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è.

```typescript
const processInfo = await chromeService.startProfile(userId, profileId, {
  headless: true,
  args: ['--disable-gpu'],
});
```

#### `stopProfile(userId, profileId, force?)`
–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Chrome –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è.

```typescript
await chromeService.stopProfile(userId, profileId, false);
```

#### `isProfileRunning(profileId)`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–∞–ø—É—â–µ–Ω –ª–∏ Chrome –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è.

```typescript
const isRunning = chromeService.isProfileRunning(profileId);
```

#### `getProcessInfo(profileId)`
–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ Chrome.

```typescript
const info = chromeService.getProcessInfo(profileId);
```

### ChromeProcessManager

–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Puppeteer. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ChromeProcessService`.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Chrome

### –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∑–∞–ø—É—Å–∫–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Chrome –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å —Å–ª–µ–¥—É—é—â–∏–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏:

- `--no-sandbox` - –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ Docker/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- `--disable-setuid-sandbox` - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ sandbox
- `--disable-dev-shm-usage` - –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å /dev/shm –≤ Docker
- `--disable-gpu` - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ GPU
- `--disable-extensions` - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
- –ò –¥—Ä—É–≥–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

### Headless —Ä–µ–∂–∏–º

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Chrome –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ headless —Ä–µ–∂–∏–º–µ (–±–µ–∑ UI). –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å `headless: false`.

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** - –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ñ–∏–ª—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
2. **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
3. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π** - –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö
4. **Sandbox** - –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö (–º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –¥–ª—è production)

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ú–æ–¥—É–ª—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—à–∏–±–∫–∏:

1. **–û—à–∏–±–∫–∏ –∑–∞–ø—É—Å–∫–∞** - –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
2. **–û—à–∏–±–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏** - –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ error
3. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ—Ü–µ—Å—Å–µ
4. **Graceful shutdown** - –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞

```bash
# –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:
ps aux | grep chrome
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–≤–∞ –ø—Ä–æ—Ñ–∏–ª—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ü–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
ps aux | grep chrome
# –ü—Ä–æ—Ü–µ—Å—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, –ø–∞–º—è—Ç—å)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö
- [ ] –õ–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å
- [ ] –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è (–ø—Ä–æ–∫—Å–∏)
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Profiles Module README](../README.md)
- [Isolation Module README](../isolation/README.md)
- [Puppeteer Documentation](https://pptr.dev/)









